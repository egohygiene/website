---
import { SynapseLayout } from '@components';
import { getSynapses, mapSynapsesBySlug } from '../../../../src/models/Synapse';

export async function getStaticPaths() {
  const syns = await getSynapses();
  return syns.map((syn) => ({ params: { slug: syn.slug } }));
}

const { slug } = Astro.params;
const synapseMap = await mapSynapsesBySlug();
const synapse = synapseMap[slug];
if (!synapse) {
  throw new Error(`Synapse not found: ${slug}`);
}
---

<SynapseLayout synapse={synapse} />
