---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import LandingScene from '../components/3d/LandingScene.jsx';
import AboutEgoHygiene from '../components/landing/AboutEgoHygiene.astro';
import LatestSynapses from '../components/landing/LatestSynapses.astro';
import ExplorePillars from '../components/landing/ExplorePillars.astro';
import Footer from '../components/landing/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
---
<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    <div id="nav-wrapper" class="fixed top-0 left-0 w-full opacity-0 transition-opacity duration-500 pointer-events-none z-20">
      <Header />
    </div>
    <section id="hero" class="relative h-screen w-screen overflow-hidden">
      <LandingScene client:only="react" />
      <div class="absolute inset-0 flex flex-col items-center justify-center text-center pointer-events-none">
        <h1 class="text-5xl md:text-6xl font-bold text-white drop-shadow-lg">Ego Hygiene</h1>
        <p class="mt-4 text-xl text-gray-200 max-w-xl">Cultivate clarity through mindful technology and inner exploration.</p>
        <button id="cta" class="mt-8 px-6 py-3 bg-indigo-600 text-white rounded-full pointer-events-auto hover:bg-indigo-700">Explore the Pillars</button>
      </div>
    </section>
    <AboutEgoHygiene />
    <LatestSynapses />
    <ExplorePillars />
    <Footer />
    <script>
      const nav = document.getElementById('nav-wrapper');
      const hero = document.getElementById('hero');
      const cta = document.getElementById('cta');
      const about = document.getElementById('about');
      window.addEventListener('scroll', () => {
        if(window.scrollY > hero.offsetHeight - 100){
          nav.classList.remove('opacity-0','pointer-events-none');
          nav.classList.add('opacity-100');
        } else {
          nav.classList.add('opacity-0','pointer-events-none');
          nav.classList.remove('opacity-100');
        }
      });
      cta?.addEventListener('click', (e)=>{
        e.preventDefault();
        about?.scrollIntoView({ behavior: 'smooth' });
      });
    </script>
  </body>
</html>
